<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>2-Min Progress with Reset</title>
  <style>
    :root {
      color-scheme: light dark;
      --bg: #0e1117;
      --bar-bg: rgba(127,127,127,0.25);
      --bar-fg: #3fb950;
      --btn-bg: rgba(127,127,127,0.18);
      --btn-fg: #e6edf3;
      --btn-border: rgba(127,127,127,0.35);
      --btn-bg-hover: rgba(127,127,127,0.28);
    }
    @media (prefers-color-scheme: light) {
      :root {
        --bg: #ffffff;
        --bar-bg: rgba(0,0,0,0.12);
        --bar-fg: #2563eb;
        --btn-bg: rgba(0,0,0,0.04);
        --btn-fg: #111827;
        --btn-border: rgba(0,0,0,0.18);
        --btn-bg-hover: rgba(0,0,0,0.08);
      }
    }
    html, body {
      height: 100%;
      margin: 0;
      background: var(--bg);
    }
    .wrap {
      min-height: 100%;
      display: grid;
      place-items: center;
      padding: 16px;
    }
    /* 横向布局：左侧按钮，右侧进度条；在窄屏自动换行 */
    .row {
      display: flex;
      align-items: center;
      gap: 12px;
      width: min(820px, 96vw);
      flex-wrap: wrap;
      justify-content: center; /* 居中整个行以适配 Notion */
    }
    .controls {
      display: flex;
      flex: 0 0 auto;
    }
    button.reset {
      appearance: none;
      border: 1px solid var(--btn-border);
      background: var(--btn-bg);
      color: var(--btn-fg);
      border-radius: 10px;
      padding: 8px 12px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      user-select: none;
      transition: background .15s ease, transform .02s ease;
    }
    button.reset:hover { background: var(--btn-bg-hover); }
    button.reset:active { transform: translateY(1px); }
    /* 进度条容器尽量占据剩余空间 */
    .progress {
      flex: 1 1 520px;
      height: 10px;
      border-radius: 999px;
      background: var(--bar-bg);
      overflow: hidden;
      min-width: 240px;
    }
    .bar {
      height: 100%;
      width: 0%;
      background: var(--bar-fg);
      transition: width 0.1s linear;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="row">
      <div class="controls">
        <button id="resetBtn" class="reset" title="重置为两分钟并重新开始">重置</button>
      </div>
      <div class="progress" role="progressbar" aria-label="Two-minute progress">
        <div id="bar" class="bar"></div>
      </div>
    </div>
  </div>

  <script>
    const TOTAL = 120; // 总时长（秒）
    let startTs = performance.now();
    let rafId = null;

    const barEl = document.getElementById('bar');
    const resetBtn = document.getElementById('resetBtn');

    function render() {
      const now = performance.now();
      const elapsed = (now - startTs) / 1000;
      const p = Math.max(0, Math.min(1, elapsed / TOTAL));
      barEl.style.width = `${p * 100}%`;
      if (p < 1) {
        rafId = requestAnimationFrame(render);
      } else {
        barEl.style.width = '100%';
        rafId = null;
      }
    }

    function start() {
      if (rafId) cancelAnimationFrame(rafId);
      startTs = performance.now();
      barEl.style.width = '0%';
      rafId = requestAnimationFrame(render);
    }

    function reset() {
      start(); // 重置并重新开始两分钟
    }

    resetBtn.addEventListener('click', reset);

    // 页面加载即开始
    start();
  </script>
</body>
</html>
